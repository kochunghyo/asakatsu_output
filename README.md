**個人開発アプリ**
AOA(Asakatsu Output Application)
----------
|トップページ①|トップページ②|投稿ページ|投稿詳細ページ|
|---|---|---|---|
|![image](https://user-images.githubusercontent.com/68846376/101469430-196f6b80-3988-11eb-9ff3-62a0c5381a95.png)|![image](https://user-images.githubusercontent.com/68846376/101469679-66534200-3988-11eb-896a-4eee9f709347.png)|![image](https://user-images.githubusercontent.com/68846376/101469852-969ae080-3988-11eb-8366-27e77cb8f7cd.png)|![image](https://user-images.githubusercontent.com/68846376/101470303-2b054300-3989-11eb-9802-5f3df7921cf9.png)|
|マイページ|「いいね！機能」|「フォロー機能」|フォロワー一覧ページ|
![image](https://user-images.githubusercontent.com/68846376/101470771-c5658680-3989-11eb-996a-91df68a83d3c.png)|![image](https://user-images.githubusercontent.com/68846376/101470979-0d84a900-398a-11eb-861b-0925b84fd0fc.png)|![image](https://user-images.githubusercontent.com/68846376/101710995-fbb01c80-3ad5-11eb-8301-93dc1a7b220c.png)|![image](https://user-images.githubusercontent.com/68846376/101471416-9ef41b00-398a-11eb-9c78-fd3581e8744a.png)|

**ログイン方法**
----------
&emsp;&emsp;URL：https://asakatsu-output.herokuapp.com/<br>
&emsp;&emsp;トップページ・ヘッダー部分の右端にある「ゲストログイン（閲覧用）」よりお入りください。<br>

**アイデア(誰のどのような問題を解決したいのか）**
----------

**◎誰を（ターゲット）<br>**
----------
&emsp;&emsp;精神疾患のある方、睡眠不足に悩んでいる方、規則正しい生活を取り戻したい方、仕事のパフォーマンスを上げたい方、最近「楽しいことがない」方<br>


**◎どのような問題を解決するのか<br>**
----------
&emsp;&emsp;精神的に病んでいる方・最近、元気がない方の睡眠不足を解消し、毎日生きることのモチベーション回復する<br>

**◎どうやって問題を解決するのか<br>**
----------
&emsp;&emsp;「朝散歩」と「朝食」で「セロトニン」を活性化させ、朝から意欲が湧き、集中力の高い活動ができる。<br>
&emsp;&emsp; セロトニンは覚醒・気分・意欲に関連した脳内物質で「朝日を浴びる」「リズム運動」「咀嚼」によって活性化される。<br>
&emsp;&emsp; 朝散歩は「朝日を浴びる」「リズム運動」に、朝食は「咀嚼」に該当し、体内時計がリセットされる。<br>
&emsp;&emsp; セロトニンを材料に夕方から自然な睡眠を誘う「メラトニン」を生成し、夜の心地よい睡眠につなげ、睡眠不足を解消させ、睡眠サイクルを取り戻す。<br>

**◎背景（なぜこのアプリを開発しようと考えたのか）<br>**
----------

**■精神疾患患者が年々増えている<br>**
&emsp;&emsp;平成29年時点で419.3万人（出典：厚生労働省)<br>
**■うつ病の最大の原因は睡眠不足<br>**
&emsp;&emsp;日本は「睡眠不足超大国」であり、男女ともにOECD加盟諸国の中でワースト1位<br>
&emsp;&emsp;男性　7時間28分　女性　7時間15分<br>
&emsp;&emsp;出典（https://news.yahoo.co.jp/articles/550bcca940b443963d7c080450d0d4be06efe8e6?page=1）<br>
**■朝散歩は睡眠不足の救世主<br>**
&emsp;&emsp;精神科医の樺沢紫苑氏によると、最強のモーニングルーティンは『朝散歩』<br>
&emsp;&emsp;①幸せホルモンと呼ばれる「セロトニン」が活性化し、日中は気分も上がり、意欲的になり、夕方から「メラトニン」が分泌され、夜の心地よい睡眠につながる。<br>
&emsp;&emsp;②さらに日光を浴び、朝食も食べることで体内時計がリセットされる。<br>
&emsp;&emsp;つまり、日常の習慣を書き換えるだけで、人は幸せになれる。<br>
**■朝散歩のやり方<br>**
&emsp;&emsp;起床後1時間以内に、15分〜30分行う。健康的な人は15分ほど<br>
&emsp;&emsp;メンタル疾患のある/メンタルが弱っている/睡眠に問題がある人は30分を目安にやる。<br>
&emsp;&emsp;※注意：30分以上を超えるとセロトニン神経が疲れてしまい、逆効果になる。<br>
&emsp;&emsp;起きて3時間以上経ってから、朝散歩しても、体内時計が後ろに3時間ずれるので、逆効果<br>
&emsp;&emsp;起きて1時間以内に朝散歩することを推奨<br>
&emsp;&emsp;朝散歩の後には、朝食を摂ることを推奨<br>
&emsp;&emsp;朝食を食べることで、さらに脳の体内時計と体の体内時計のズレが補正される。<br>
&emsp;&emsp;午後にやってもセロトニン効果は小さいので、できれば、午前10時までには完了させる。<br>
&emsp;&emsp;体内時計がリセットされてから、15〜16時間後にメラトニンが分泌され、眠気が出る。<br>
&emsp;&emsp;逆算すると、午前7時に体内時計をリセットすると、22時〜23時に眠気が出る。<br>
&emsp;&emsp;参考文献：『精神科医が教えるストレスフリー大全』（著者：樺沢紫苑/ダイヤモンド社）

**■ただ人は一人でやると先延ばししてしまう生き物<br>**
&emsp;&emsp;そこで、朝活を周囲から評価されながらアウトプットするアプリがあれば、モチベーションも上がり、面白いだろうと思い開発に至った。<br>

**このアプリでどのような体験を得られるか**
----------
●朝散歩・朝食、その他の朝活を頑張って頂くことで、体内時計をリセットし、夜に心地良い睡眠を促す。<br>
●「毎日朝4時から朝10まで」というタイムリミットを設定し、一定の緊張感を保ちながら、アウトプットを積み上げることを楽しんで頂く。<br> 
●「フォロー」機能、「いいね！」機能、コメント機能によって、孤独を解消し、仲間と支え合いながら、朝の習慣を身につける。<br>

**機能一覧**
----------
**1）ユーザー新規登録機能/ログイン機能(devise)<br>**
&emsp;&emsp;新規登録時は個人情報も入力するが、アプリの性質上、匿名を希望するユーザーも想定されるので、、アプリ上ではニックネームで利用していただく。ログイン時はメールアドレスとパスワードを入力<br>
**2）CRUD機能 <br>**
&emsp;&emsp;ユーザーは自身の朝活のタイトル、画像、朝活の種類、コメントを登録、編集、削除可能 <br>
**3）コメント投稿機能<br>**
&emsp;&emsp;ユーザーは自身及び他ユーザーの投稿へコメントの投稿可能<br>
**4）画像アップロード機能（carrierwave）<br>**
&emsp;&emsp;新規会員登録時はプロフィール画像（任意）,朝活投稿時は画像必須<br>
**5）画像複数枚登録機能(JavaScript）<br>**
&emsp;&emsp;投稿機能においては、画像複数枚登録可能<br>
**6）投稿機能に制限時間の設定(JQuery/Ajax)<br>**
&emsp;&emsp; 投稿機能のcreateアクションにて、比較演算子を使用し、投稿時間は朝4時〜朝10時までに制限、毎日タイムリミットを設定し、習慣化を促す<br>
**7）「いいね！」機能(JQuery/Ajax)<br>**
&emsp;&emsp; 自身と他のユーザーの投稿に「いいね！」が送れる<br>
**8）「フォロー」機能(JQuery/Ajax)<br>**
&emsp;&emsp; 投稿詳細ページ一覧に投稿したユーザー名があり、そこから該当ユーザーのマイページへ遷移し、フォローしたい場合は「フォローする」をフォローを解除したい場合は「フォローを解除する」で解除できる<br>
**9）テストの実施（model)<br>**
&emsp;&emsp;RSpec、factory_bot使用<br>
**10）画像のAWS S3へのアップロード設定<br>**
&emsp;&emsp;大容量の画像もできるようにS3を使用<br>

**開発日数**
----------
**作業期間　2020年11月14日　〜 2020年12月8日<br>**
工数　25日/175時間 <br>

**開発工程**
------------------------------
○ ER図及びデータベース設計<br>
○ Githubで機能別、サーバーサイド、フロントエンド、JavaScript使用別にトピックブランチを作成し、プルリクエスト活用<br>
○ 11月14日（土）〜11月22日（日）サーバーサイド実装完了<br>
○ 11月23日（月）〜12月1日（日）フロントエンド実装完了<br>
○ 12月2日（火）〜12月6日（日）Ajaxによる「いいね！」機能「フォロー機能」実装完了,その他諸機能実装完了<br>
○ 12月7日（月）〜12月8日（日）テスト及びデプロイ作業完了<br>
○ RSpecテスト（単体テスト）を実施<br>
○ インフラにHeroku使用<br>
○ 開発中にtwitterの発信しながら、他の現役・駆け出しエンジニアと交流<br>


**使用言語技術**
--------------
言語・フレームワーク<br>
&emsp;&emsp;Ruby2.6.5p114 /Ruby on Rails 6.0.3.4<br>
フロントエンド<br>
&emsp;&emsp;HTML/CSS/Haml/Scss/JavaScript/JQuery<br>
データベース<br>
&emsp;&emsp;PostgreSQL 13.0<br>
テスト<br>
&emsp;&emsp;RSpec/factory_bot<br>
インフラ<br>
&emsp;&emsp;heroku/7.47.4 darwin-x64 node-v12.16.2<br>

使用Gem<br>
haml-rails/font-awesome-sass/pry-rails/<br>
devise/rails-i18n/active_hash<br>
carrierwave/mini_magick/jquery-rails<br>
rspec-rails/factory_bot_rails/dot_env<br><br>


連絡先
----------
高 忠孝 （コウ チュンヒョ）
&emsp;&emsp;Gmail / kc19851226@gmail.com &emsp;&emsp;twitter / @kotsuWE

**ER図**
--------------
|![image](https://user-images.githubusercontent.com/68846376/101475006-28a5e780-398f-11eb-878c-b13f2d78c757.png)|
--------------

## usersテーブル
|Column|Type|options|
|------|----|-------|
|nickname|string|null:false|
|email|string|null:false,unique:true|
|password|string|null:false|
|password_confirmation|string|null:false|
|first_name|string|null:false|
|last_name|string|null:false|
|first_name_kana|string|null:false|
|last_name_kana|string|null:false|
|birthday|date|null:false|
|face_image|string|

### Association
- has_many :outputs
- has_many :comments
- has_many :likes
- mount_uploader :face_image, ImageUploader
- has_many :following_relationships, foreign_key: "follower_id", class_name: "Relationship", dependent: :destroy
- has_many :following, through: :following_relationships
- has_many :follower_relationships, foreign_key: "following_id", class_name: "Relationship", dependent: :destroy
- has_many :followers, through: :follower_relationships

## outputsテーブル
|Column|Type|options|
|------|----|-------|
|title|string|null:false|
|text|string|null:false|
|type_id|bigint|null:false,foreign_key:true|
|user_id|bigint|null:false,foreign_key:true|

### Association
- has_many :images, dependent: :destroy
- accepts_nested_attributes_for :images, allow_destroy: true
- belongs_to :user
- belongs_to_active_hash :type
- has_many :comments
- has_many :likes, dependent: :destroy

## imagesテーブル
|Column|Type|options|
|------|----|-------|
|src|string|null:false|
|output|references|null:false,foreign_key:true|

### Association
- mount_uploader :src, ImageUploader
- belongs_to :output

## commentsテーブル
|Column|Type|options|
|------|----|-------|
|user_id|integer|
|output_id|integer|
|text|text|

### Association
- belongs_to :output
- belongs_to :user

## likesテーブル
|Column|Type|options|
|------|----|-------|
|user|references|null:false,foreign_key:true|
|output|references|null:false,foreign_key:true|

### Association
- belongs_to :output
- belongs_to :user

## relationshipsテーブル
|Column|Type|options|
|------|----|-------|
|follower_id|integer|foreign_key: {to_table: :users}|
|following_id|integer|foreign_key: {to_table: :users}|
|follower_id|index|unique:true|
|following_id|index|unique:true|

### Association
- belongs_to :following, class_name: "User"
- belongs_to :follower, class_name: "User"
